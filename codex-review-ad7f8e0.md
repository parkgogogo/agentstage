# Codex Review æŠ¥å‘Š - Agent Self-Guidance System

## ğŸ” å®¡æŸ¥æäº¤
Commit: ad7f8e0
Files:
- packages/cli/src/commands/guide.ts
- packages/cli/src/utils/agent-helper.ts
- packages/cli/src/index.ts

---

## ğŸ”´ ä¸¥é‡é—®é¢˜

### 1. agent-helper.ts æœªè¢«å¼•ç”¨ (åŠŸèƒ½æœªç”Ÿæ•ˆ)
**é—®é¢˜**: `agent-helper.ts` æä¾›äº† `printAgentErrorHelp` ç­‰å‡½æ•°ï¼Œä½†æ²¡æœ‰è¢«ä»»ä½•å‘½ä»¤æ–‡ä»¶å¯¼å…¥ä½¿ç”¨ã€‚

**å½±å“**: æ™ºèƒ½é”™è¯¯å¤„ç†åŠŸèƒ½å®é™…ä¸Šæ²¡æœ‰ç”Ÿæ•ˆï¼ŒAgent çœ‹ä¸åˆ°å‹å¥½çš„é”™è¯¯æç¤ºã€‚

**ä¿®å¤**: åœ¨ `page/add.ts`, `page/rm.ts`, `run/set-state.ts` ç­‰æ–‡ä»¶ä¸­å¯¼å…¥å¹¶ä½¿ç”¨è¿™äº›å‡½æ•°ã€‚

---

## ğŸŸ¡ ä¸­ç­‰é—®é¢˜

### 2. guide ä¸­å¼•ç”¨äº†ä¸å­˜åœ¨çš„å‘½ä»¤
**æ–‡ä»¶**: `guide.ts`

**é—®é¢˜**: 
```typescript
{
  scenario: 'Validate UI JSON',
  command: 'agentstage validate ui mypage',
  ...
},
{
  scenario: 'Validate state',
  command: 'agentstage validate state mypage',
  ...
}
```

**å½±å“**: Agent ä¼šå°è¯•è¿è¡Œä¸å­˜åœ¨çš„ `validate` å‘½ä»¤ï¼Œå¯¼è‡´å›°æƒ‘ã€‚

**ä¿®å¤**: 
- æ–¹æ¡ˆ A: ç§»é™¤ `validate` ç›¸å…³çš„ guide å†…å®¹
- æ–¹æ¡ˆ B: å®ç° `validate` å‘½ä»¤

### 3. init å‘½ä»¤ä½ç½®ä¸åŒ¹é…
**é—®é¢˜**: Guide ä¸­å»ºè®® `agentstage init`ï¼Œä½†å®é™…å‘½ä»¤æ˜¯ `agentstage dev init`ã€‚

**æ£€æŸ¥**: ä»ä»£ç ä¸­çœ‹åˆ° `dev/index.ts` ä¸­å®šä¹‰äº† `devInitCommand`ï¼Œè¯´æ˜ `init` æ˜¯ `dev` çš„å­å‘½ä»¤ã€‚

**ä¿®å¤**: 
- æ–¹æ¡ˆ A: åœ¨é¡¶å±‚æ·»åŠ  `init` åˆ«åå‘½ä»¤
- æ–¹æ¡ˆ B: æ›´æ–° guide ä¸­çš„å‘½ä»¤ä¸º `agentstage dev init`

---

## ğŸŸ¢ å°é—®é¢˜

### 4. ä»£ç è´¨é‡
- `guide.ts` ä¸­çš„ `GuideSection` æ¥å£ä½¿ç”¨äº†å†…è”ç±»å‹å®šä¹‰ï¼Œå¯ä»¥è€ƒè™‘æå–åˆ°ç‹¬ç«‹æ–‡ä»¶
- éƒ¨åˆ†å­—ç¬¦ä¸²ä½¿ç”¨äº†ä¸­æ–‡æ³¨é‡Šï¼Œè€ƒè™‘ç»Ÿä¸€è¯­è¨€

### 5. å®Œæ•´æ€§
- `validate` workflow åœ¨ guide ä¸­è¢«æåˆ°ï¼Œä½†æ²¡æœ‰å®é™…å‘½ä»¤æ”¯æŒ
- `agent-helper.ts` ä¸­çš„ `errorGuides` åªè¦†ç›–äº†éƒ¨åˆ†é”™è¯¯ï¼Œè¿˜æœ‰æ›´å¤šé”™è¯¯ç±»å‹æœªåŒ…å«

---

## âœ… ä¼˜ç‚¹

1. **Guide ç³»ç»Ÿè®¾è®¡æ¸…æ™°**: åˆ†ä¸»é¢˜ã€æœ‰ç¤ºä¾‹ã€æœ‰é”™è¯¯ä¿®å¤æ–¹æ¡ˆ
2. **è¾“å‡ºæ ¼å¼åŒ–è‰¯å¥½**: ä½¿ç”¨é¢œè‰²ã€å›¾æ ‡ï¼Œæ˜“è¯»æ€§å¼º
3. **æ¶æ„å¯æ‰©å±•**: å®¹æ˜“æ·»åŠ æ–°çš„ guide ä¸»é¢˜å’Œé”™è¯¯ç±»å‹
4. **é”™è¯¯å¤„ç†è®¾è®¡åˆç†**: ErrorGuide ç»“æ„å®Œæ•´ï¼ˆmessage, cause, fix, exampleï¼‰

---

## ğŸ“‹ ä¿®å¤æ¸…å•

### å¿…é¡»ä¿®å¤ (é˜»å¡ä½¿ç”¨)
1. [ ] åœ¨å‘½ä»¤æ–‡ä»¶ä¸­å¯¼å…¥å¹¶ä½¿ç”¨ `agent-helper.ts`
2. [ ] ç§»é™¤æˆ–ä¿®å¤ guide ä¸­ `validate` å‘½ä»¤çš„å¼•ç”¨
3. [ ] ç»Ÿä¸€ `init` å‘½ä»¤çš„è·¯å¾„ï¼ˆé¡¶å±‚æˆ– dev å­å‘½ä»¤ï¼‰

### å»ºè®®ä¿®å¤
4. [ ] è¡¥å……æ›´å¤šé”™è¯¯ç±»å‹åˆ° `errorGuides`
5. [ ] è€ƒè™‘å®ç° `validate` å‘½ä»¤æˆ–ä» guide ä¸­ç§»é™¤

---

## ğŸ¯ ç»“è®º

**å½“å‰çŠ¶æ€**: åŠŸèƒ½è®¾è®¡è‰¯å¥½ï¼Œä½†å­˜åœ¨å®ç°é—®é¢˜

**ä¸»è¦é—®é¢˜**: `agent-helper.ts` æ²¡æœ‰è¢«å®é™…ä½¿ç”¨ï¼Œå¯¼è‡´ Agent å‹å¥½çš„é”™è¯¯å¤„ç†æ²¡æœ‰ç”Ÿæ•ˆã€‚

**å»ºè®®**: ä¿®å¤ä¸Šè¿°é—®é¢˜åå†æäº¤ã€‚
